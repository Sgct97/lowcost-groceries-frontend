<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PriceFighter - Smart Grocery Shopping</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container-wide">
            <div class="header-content">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16 2L4 8V14C4 22 16 30 16 30C16 30 28 22 28 14V8L16 2Z" fill="white" opacity="0.9"/>
                        <path d="M16 8L10 11V15C10 19 16 23 16 23C16 23 22 19 22 15V11L16 8Z" fill="#6BBF59"/>
                    </svg>
                    <span class="logo-text">PriceFighter</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Step 1: Build Cart -->
        <section id="step1" class="section active">
            <div class="container">
                <div class="hero-text">
                    <h1 class="headline">
                        The fastest way to find<br>
                        <span class="accent">the lowest prices</span> on groceries
                    </h1>
                    <p class="subheadline">AI-powered shopping assistant. No account needed. Data is never sold.</p>
                </div>

                <div class="card-elevated">
                    <div class="card-content">
                        <div class="section-header">
                            <h2 class="section-title">Build Your Shopping List</h2>
                            <p class="section-description">Add up to 10 items. Our AI will help you find exactly what you want.</p>
                        </div>

                        <!-- Input Area -->
                        <div class="input-wrapper">
                            <div class="search-box">
                                <input 
                                    type="text" 
                                    id="itemInput" 
                                    class="search-input" 
                                    placeholder="Type a grocery item (e.g., milk, eggs, bread)"
                                    autocomplete="off"
                                    maxlength="50"
                                >
                                <button id="addManualBtn" class="btn-add" disabled title="Get AI suggestions for this item">
                                    <span>+ Add Item</span>
                                </button>
                            </div>
                        </div>

                        <!-- AI Suggestions -->
                        <div id="suggestions" class="suggestions hidden">
                            <div class="suggestions-label">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M8 1L10.5 6L16 7L12 11L13 16L8 13L3 16L4 11L0 7L5.5 6L8 1Z" fill="#6BBF59"/>
                                </svg>
                                <span>AI Suggestions</span>
                                <div class="thinking-dots">
                                    <span></span><span></span><span></span>
                                </div>
                            </div>
                            <div id="suggestionsContent" class="suggestions-grid">
                                <!-- Dynamically populated -->
                            </div>
                        </div>

                        <!-- Cart -->
                        <div class="cart-container">
                            <div class="cart-header">
                                <h3 class="cart-title">
                                    Your List
                                    <span id="cartCount" class="count-badge">0/10</span>
                                </h3>
                                <button id="clearCartBtn" class="btn-text" style="display: none;">Clear all</button>
                            </div>

                            <div id="cartItems" class="cart-list">
                                <div class="empty-cart">
                                    <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                                        <path d="M8 8H16L20 40H52L56 20H20" stroke="#E0E0E0" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
                                        <circle cx="24" cy="52" r="4" fill="#E0E0E0"/>
                                        <circle cx="48" cy="52" r="4" fill="#E0E0E0"/>
                                    </svg>
                                    <p class="empty-text">Your list is empty</p>
                                    <p class="empty-subtext">Start typing above to add items</p>
                                </div>
                            </div>
                        </div>

                        <!-- Continue Button -->
                        <div class="action-bar">
                            <button id="continueBtn" class="btn-primary btn-large" disabled>
                                Continue to Location
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <path d="M7 4L13 10L7 16" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step 2: ZIP Code -->
        <section id="step2" class="section">
            <div class="container">
                <div class="hero-text">
                    <h1 class="headline">
                        Where should we<br>
                        <span class="accent">search for prices?</span>
                    </h1>
                    <p class="subheadline">We'll find the best deals at stores near you</p>
                </div>

                <div class="card-elevated">
                    <div class="card-content">
                        <div class="zip-input-container">
                            <label class="input-label">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <path d="M10 2C7.24 2 5 4.24 5 7C5 10.75 10 18 10 18C10 18 15 10.75 15 7C15 4.24 12.76 2 10 2ZM10 9C8.9 9 8 8.1 8 7C8 5.9 8.9 5 10 5C11.1 5 12 5.9 12 7C12 8.1 11.1 9 10 9Z" fill="#0d5446"/>
                                </svg>
                                ZIP Code
                            </label>
                            <input 
                                type="text" 
                                id="zipInput" 
                                class="zip-input" 
                                placeholder="Enter 5-digit ZIP code"
                                maxlength="5"
                                pattern="[0-9]{5}"
                            >
                        </div>

                        <!-- Prioritize Nearby Toggle -->
                        <div class="toggle-container">
                            <div class="toggle-label">
                                <svg width="18" height="18" viewBox="0 0 20 20" fill="none">
                                    <path d="M10 2C7.24 2 5 4.24 5 7C5 10.75 10 18 10 18C10 18 15 10.75 15 7C15 4.24 12.76 2 10 2Z" fill="#0d5446"/>
                                </svg>
                                <span>Prioritize stores nearby</span>
                                <div class="info-tooltip" title="When enabled, we only show products from stores in your area. Turn off for absolute lowest prices from any store.">ⓘ</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="prioritizeNearbyToggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="action-bar-split">
                            <button id="backBtn" class="btn-secondary">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <path d="M13 16L7 10L13 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Back
                            </button>
                            <button id="findPricesBtn" class="btn-primary btn-large" disabled>
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                    <circle cx="9" cy="9" r="6" stroke="white" stroke-width="2"/>
                                    <path d="M13 13L17 17" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                                Find Lowest Prices
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step 3: Loading -->
        <section id="step3" class="section">
            <div class="container">
                <div class="card-elevated">
                    <div class="card-content-center">
                        <div class="loader-container">
                            <div class="spinner-large"></div>
                            <h2 class="loading-title">Finding the best prices...</h2>
                            <p id="loadingStatus" class="loading-text">Initializing search</p>
                            
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div id="progressFill" class="progress-fill"></div>
                                </div>
                                <p class="progress-text">This usually takes 15-20 seconds</p>
                            </div>

                            <p class="job-id-text">Job ID: <code id="jobIdDisplay">-</code></p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Step 4: Results -->
        <section id="step4" class="section">
            <div class="container-wide">
                <div class="results-hero">
                    <h1 class="headline-large">
                        Here are <span class="accent">your best prices</span>
                    </h1>
                    <p class="results-subtitle">
                        Found <span id="itemsFoundCount" class="accent-text">0</span> items in ZIP <span id="zipDisplay" class="accent-text">-</span>
                    </p>
                </div>

                <div id="resultsTable" class="results-grid">
                    <!-- Dynamically populated -->
                </div>

                <!-- Summary Card -->
                <div class="summary-card">
                    <h3 class="summary-title">Summary</h3>
                    <div class="summary-stats">
                        <div class="stat">
                            <span class="stat-value" id="totalItems">0</span>
                            <span class="stat-label">Items Searched</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="totalProducts">0</span>
                            <span class="stat-label">Products Found</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="processingTime">0s</span>
                            <span class="stat-label">Search Time</span>
                        </div>
                    </div>
                </div>

                <div class="action-bar-center">
                    <button id="newSearchBtn" class="btn-primary btn-large">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M17 10C17 13.866 13.866 17 10 17C6.134 17 3 13.866 3 10C3 6.134 6.134 3 10 3C12.3 3 14.3 4.1 15.6 5.8M15 3V7H11" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        New Search
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p class="footer-text">Powered by GPT-5-mini AI • Google Shopping Data</p>
            <p class="footer-subtext">We monitor all prices. No account needed. Data is never sold.</p>
        </div>
    </footer>

    <!-- Toast -->
    <div id="toast" class="toast">
        <span id="toastMessage"></span>
    </div>

    <script src="app.js"></script>
</body>
</html>

